const Command = require ('../../ Structures / Command');
const richiesta = require ('richiesta');

module.exports = class extends Command {
    costruttore (... args) {
        super (... args, {
            descrizione: "ciao,sono nikeboy.11 ...",
            utilizzo: "<question>",
            categoria: "Divertimento"
        });
    }

    async run (message, args) {
        const Discord = require ('discord.js');
        domanda const = args.slice (0) .join ('');
        if (! question) return message.channel.send ("Non hai fatto una domanda");
        const url = 'https://8ball.delegator.com/magic/JSON/' + domanda;
        richiesta (url, funzione (err, risposta, corpo) {
            if (err) {
                message.channel.send ("Impossibile ottenere risposte da 8ball, riprova pi√π tardi.");
            }
            corpo = JSON.parse (corpo);
            lascia embedColor = `RANDOM`;
            if (body.magic.type === "Affirmative") embedColor = "# 0dba35";
            if (body.magic.type === "Contrario") embedColor = "# ba0d0d";
            if (body.magic.type === "Neutral") embedColor = "# 6f7275";
            const eightBallEmbed = nuovo Discord.MessageEmbed ()
            .setTitle ("8ball")
            .setColor (embedColor)
            .setThumbnail (message.author.avatarURL)
            .addField ("Question:", question, false)
            .addField ("Richiesto da:", message.author.tag, false)
            .addField ("Rispondi:", body.magic.answer, false)
            .setFooter ("API fornita da Delegator 8ball");
            message.channel.send (eightBallEmbed);
        });
    }
}
